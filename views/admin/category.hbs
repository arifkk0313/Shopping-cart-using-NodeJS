
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="sweetalert2.all.min.js"></script>


<div id="app">
    <div id="sidebar" class="active">



        

        <div class="page-heading">
            <div class="page-title">
                <div class="row">
                    <div class="col-12 col-md-6 order-md-1 order-last">
                        <h3></h3>
                        <p class="text-subtitle text-muted"> </p>
                    </div>
                    <div class="col-12 col-md-6 order-md-2 order-first">
                        <nav aria-label="breadcrumb" class="breadcrumb-header
                            float-start float-lg-end">

                        </nav>
                    </div>
                </div>
            </div>

            <!-- Basic Horizontal form layout section start -->
            <section id="basic-horizontal-layouts">
                <form action="/admin/category" method='post' onsubmit="return catagoryvalidation()">
                     <div class="row match-height">
                        <div class="col-md-6 col-12">
                            <div class="card" style="width: 100%;height:auto">
                                <div class="card-header" style="margin-top: 20px;">
                                    <h4 class="card-title">ADD CATEGORY</h4>
                                </div>
                                <div class="card-content">
                                    <div class="card-body">
                                        <form class="form form-horizontal">
                                            <div class="form-body">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <label>Catagory Name</label>
                                                    </div>
                                                    <span></span>
                                                    <div class="col-md-8
                                                        form-group">
                                                        <input type="text"
                                                            id="name"
                                                            class="form-control"
                                                            name="name"
                                                            placeholder="Catargory Name">
                                                    </div>
                                                    <span id="Catagory"
                                                        class="text-danger
                                                        font-weight-regular">
                                                    </span>
                                                    <div class="col-md-4">
                                                        {{!-- <label>Email</label>
                                                        --}}
                                                    </div>
                                                    <div class="col-md-8
                                                        form-group">
                                                        {{!-- <input
                                                            type="email"
                                                            id="email-id"
                                                            class="form-control"
                                                            name="email-id"
                                                            placeholder="Email">
                                                        --}}
                                                    </div>
                                                    <div class="col-md-4">
                                                        {{!-- <label>Mobile</label>
                                                        --}}
                                                    </div>
                                                    <div class="col-md-8
                                                        form-group">
                                                        {{!-- <input
                                                            type="number"
                                                            id="contact-info"
                                                            class="form-control"
                                                            name="contact"
                                                            placeholder="Mobile">
                                                        --}}
                                                    </div>
                                                    <div class="col-md-4">
                                                        {{!-- <label>Password</label>
                                                        --}}
                                                    </div>
                                                    <div class="col-md-8
                                                        form-group">
                                                        {{!-- <input
                                                            type="password"
                                                            id="password"
                                                            class="form-control"
                                                            name="password"
                                                            placeholder="Password">
                                                        --}}
                                                    </div>
                                                    <div class="col-12 col-md-8
                                                        offset-md-4 form-group">
                                                        <div class='form-check'>
                                                            <div
                                                                class="checkbox">
                                                                {{!-- <input
                                                                    type="checkbox"
                                                                    id="checkbox1"
                                                                    class='form-check-input'
                                                                    checked>
                                                                <label
                                                                    for="checkbox1">Remember
                                                                    Me</label>
                                                                --}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-12 d-flex
                                                        justify-content-end">
                                                        <button type="submit"
                                                            class="btn
                                                            btn-primary me-1
                                                            mb-1">Submit</button>
                                                        {{!-- <button
                                                            type="reset"
                                                            class="btn
                                                            btn-light-secondary
                                                            me-1 mb-1">Reset</button>
                                                        --}}
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="col-lg-6 col-md-12">
                        <div class="card" style="width: 100%; height:auto">
                            <div class="card-header">
                                <h4 class="card-title">List Of Added Category</h4>
                            </div>
                            <div class="card-content">
                                <div class="card-body" style="width: 400px;">
                                    {{#each category}}
                                    {{!-- <p>Use Utility classes <code>.d-flex</code>
                                        <code>.justify-content-between</code>
                                        <code>align-items-center</code> to
                                        create space between badge and your
                                        content
                                    </p> --}}
                                    <ul class="list-group">

                                        <li
                                            class="list-group-item d-flex
                                            justify-content-between
                                            align-items-center">
                                            <span>{{this.name}}</span>
                                            <button class="badge bg-danger
                                                badge-pill badge-round" onclick="return deleteCategory(event,'{{this._id}}')">Delete</button>
                                        </li>
                                        {{!-- <li
                                            class="list-group-item d-flex
                                            justify-content-between
                                            align-items-center">
                                            <span>space between badgeOat cake
                                                icing pastry pie carrot</span>
                                            <span class="badge bg-secondary
                                                badge-pill badge-round ml-1">5</span>
                                        </li> --}}
                                    </ul>
                                    {{/each}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>
        </div>
    </div>

</div>


<script>


    function deleteCategory(event,catId) {
    event.preventDefault();
    var link = event.currentTarget.href;
    var name = event.currentTarget.name;
    Swal.fire({
        title: 'Are you sure?',
        text: "Do you want to delete " + name,
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes'
        }).then(async (result) => {
            if (result.isConfirmed) {
                
                let response = await fetch('/admin/delete-catagory/' + catId)
                let data = await response.json()
                if (data) {

                    event.target.closest('.list-group').style.display = 'none'
                    const Toast = Swal.mixin({
                        toast: true,
                        position: 'bottom',
                        showConfirmButton: false,
                        timer: 3000,

                    })

                    Toast.fire({
                        icon: 'success',
                        title: 'Item deleted successfully'
                    })

                }
            }
            else {
                return false;
            }
        })

    }

    function catagoryvalidation() {
      var  catagory= document.getElementById("name").value;
      console.log(catagory)
      if(catagory == ""){
          document.getElementById("Catagory").innerHTML =
          " ** Please enter the Catagory to add";
        return false;
        }
    }

</script>
